<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./src/fontawesome/css/all.min.css">

    <script src="src/jquery-3.6.0.js"></script>

    <link rel="stylesheet" href="src/jquery-ui.min.css" />
    <script src="src/jquery-ui.min.js"></script>

    <script src="src/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="src/css/bootstrap.css" />


    <style>
        .dropdown-submenu {
            position: relative;
        }

        .dropdown-submenu a::after {
            transform: rotate(-90deg);
            position: absolute;
            right: 6px;
            top: .8em;
        }

        .dropdown-submenu .dropdown-menu {
            top: 0;
            left: 100%;
            margin-left: .1rem;
            margin-right: .1rem;
        }
    </style>


</head>

<body>
    <button class="dropdown-toggle btn btn-outline-info" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Spatial Unit
    </button>
    <ul class="dropdown-menu mo_cs-dropdown" aria-labelledby="dropdownMenuLink">
    </ul>


    <script>
        var spatial_unit_data = [{
            id: 1,
            category: "Land Informations",
            content: [{
                sub_category: "Land Use Classification",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Land Ownership",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }]
        }, {
            id: 2,
            category: "Agriculture",
            content: [{
                sub_category: "Machineries",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Production",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Insurance",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Extension",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Schema",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Export",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }]
        }, {
            id: 3,
            category: "Livestock",
            content: [{
                sub_category: "Forage Cultivation",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Special Cultivation",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Small Industies",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Population",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Services",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }]
        }, {
            id: 4,
            category: "Irrigation",
            content: [{
                sub_category: "Ornamental Fisheries",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Irrigation Projects",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Minor Irrigation",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }, {
                sub_category: "Inland Fisheries",
                sub_content: [{
                    year: "2015"
                }, {
                    year: "2016"
                }, {
                    year: "2017"
                }, {
                    year: "2018"
                }, {
                    year: "2019"
                }, {
                    year: "2020"
                }, {
                    year: "2021"
                }]
            }]
        }]
        var csContainer = $(".mo_cs-dropdown");
        $.each(spatial_unit_data, (index, item) => {
            //append li
            var dropdownGroup = `<li class="dropdown-submenu"><a class="dropdown-item dropdown-toggle"  id="${index}_main" data-region="${item.category}" href="#"  >${item.category}</a>
                            <ul class="dropdown-menu" aria-labelledby="${index}_main">`
            //loop through content array
            $.each(item.content, (index, items) => {
                dropdownGroup += ` <li class="dropdown-submenu"><a class="dropdown-toggle dropdown-item"  id="${index}_inner"  href="#" >${items.sub_category}</a><ul class="dropdown-menu" aria-labelledby="${index}_inner">`
                //loop through sub_content array
                $.each(items.sub_content, (index, items) => {
                    dropdownGroup += ` <li><a class="dropdown-item "  href="#" aria-labelledby="${index}_inner"  href="#">${items.year}</a></li>`
                })
                dropdownGroup += `</ul></li>` //closes tags
            })

            dropdownGroup += `</ul></li>`; //close tags..

            csContainer.append(dropdownGroup);
        });
        //on click of `a` tag
        $(document).on('mouseover', '.dropdown-menu a.dropdown-toggle', function(e) {
            if (!$(this).next().hasClass('show')) {
                $(this).parents('.dropdown-menu').first().find('.show').removeClass('show'); //remove show classs from others
            }
            var $subMenu = $(this).next('.dropdown-menu');
            $subMenu.toggleClass('show');
            //on hidden...remove class as well
            $(this).parents('li.dropdown.show').on('hidden.bs.dropdown', function(e) {
                $('.dropdown-submenu .show').removeClass('show');
            });
            return false; //prevnt deafult..
        });
    </script>
</body>

</html>