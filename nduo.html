<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
    <style>
        .dropdown-submenu {
            position: relative;
        }

        .dropdown-submenu a::after {
            transform: rotate(-90deg);
            position: absolute;
            right: 6px;
            top: .8em;
        }

        .dropdown-submenu .dropdown-menu {
            top: 0;
            left: 100%;
            margin-left: .1rem;
            margin-right: .1rem;
        }
    </style>


</head>

<body>
    <button class="dropdown-toggle btn" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Dropdown link
    </button>
    <ul class="dropdown-menu mo_cs-dropdown" aria-labelledby="dropdownMenuLink">
    </ul>


    <script>
        var regionsData = [{
                ID: 1,
                Title: "Middle Earth",
                Locations: [{
                        Category: "Lothlorien",
                        Child: [{
                                PersonTitle: "Galadriel",
                                Link: "https://www.galadriel.lot"
                            },
                            {
                                PersonTitle: "Celeborn",
                                Link: "https://www.celeb.lot"
                            }
                        ]
                    },
                    {
                        Category: "Mordor",
                        Child: [{
                            PersonTitle: "Saruman",
                            Link: "https://www.srmn.org"
                        }]
                    }
                ]
            },
            {
                ID: 2,
                Title: "Arrakis",
                Locations: [{
                    Category: "Lothlorien1",
                    Child: [{
                            PersonTitle: "Galadriel1",
                            Link: "https://www.galadriel.lot"
                        },
                        {
                            PersonTitle: "Celeborn",
                            Link: "https://www.celeb.lot"
                        }
                    ]
                }]
            }
        ]
        var csContainer = $(".mo_cs-dropdown");
        $.each(regionsData, (index, item) => {
            //append li
            var dropdownGroup = `<li class="dropdown-submenu"><a class="dropdown-item dropdown-toggle"  id="${index}_main" data-region="${item.Title}" href="#"  >${item.Title}</a>
                            <ul class="dropdown-menu" aria-labelledby="${index}_main">`
            //loop through loaction array
            $.each(item.Locations, (index, items) => {
                dropdownGroup += ` <li class="dropdown-submenu"><a class="dropdown-toggle dropdown-item"  id="${index}_inner"  href="#" >${items.Category}</a><ul class="dropdown-menu" aria-labelledby="${index}_inner">`
                //loop through child array
                $.each(items.Child, (index, items) => {
                    dropdownGroup += ` <li><a class="dropdown-item "  href="${items.Link}" aria-labelledby="${index}_inner"  href="#">${items.PersonTitle}</a></li>`
                })
                dropdownGroup += `</ul></li>` //closes tags
            })

            dropdownGroup += `</ul></li>`; //close tags..

            csContainer.append(dropdownGroup);
        });
        //on click of `a` tag
        $(document).on('mouseover', '.dropdown-menu a.dropdown-toggle', function(e) {
            if (!$(this).next().hasClass('show')) {
                $(this).parents('.dropdown-menu').first().find('.show').removeClass('show'); //remove show classs from others
            }
            var $subMenu = $(this).next('.dropdown-menu');
            $subMenu.toggleClass('show');
            //on hidden...remove class as well
            $(this).parents('li.dropdown.show').on('hidden.bs.dropdown', function(e) {
                $('.dropdown-submenu .show').removeClass('show');
            });
            return false; //prevnt deafult..
        });
    </script>
</body>

</html>